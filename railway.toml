[build]
# Use the production Dockerfile
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# Start command is handled by Dockerfile ENTRYPOINT
startCommand = ""
# Restart on failure
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Health check (Railway will monitor this)
healthcheckPath = "/health"
healthcheckTimeout = 300

# Environment
[env]
# Railway sets PORT automatically
# Daemon will bind to Railway's PORT (usually 3030 or dynamic)
NODE_ENV = "production"

# SECURITY: Railway automatically sets RAILWAY_ENVIRONMENT
# This triggers secure mode (anonymous auth disabled)
# The daemon will REFUSE to start if allowAnonymous=true on Railway

# CORS - allow Railway domains
# Set these in Railway dashboard as needed
# CORS_ORIGIN = "https://your-ui-domain.railway.app"

# Database path (persistent volume)
AGOR_DB_PATH = "file:/home/agor/.agor/agor.db"

# Optional: Set these in Railway dashboard (encrypted)
# ANTHROPIC_API_KEY = "sk-ant-..."
# OPENAI_API_KEY = "sk-..."
# GEMINI_API_KEY = "..."

